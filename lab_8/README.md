# Лабораторная работа 8

## Задачи

1. Построение базового REST API:

   - Реализуйте сервер, поддерживающий маршруты:
   - GET /users — получение списка пользователей.
   - GET /users/{id} — получение информации о конкретном пользователе.
   - POST /users — добавление нового пользователя.
   - PUT /users/{id} — обновление информации о пользователе.
   - DELETE /users/{id} — удаление пользователя.

2. Подключение базы данных:

   - Добавьте базу данных (например, PostgreSQL или MongoDB) для хранения информации о пользователях.
   - Модифицируйте сервер для взаимодействия с базой данных.

3. Обработка ошибок и валидация данных:

   - Реализуйте централизованную обработку ошибок.
   - Добавьте валидацию данных при создании и обновлении пользователей.

4. Пагинация и фильтрация:

   - Добавьте поддержку пагинации и фильтрации по параметрам запроса (например, поиск пользователей по имени или возрасту).

5. Тестирование API:

   - Реализуйте unit-тесты для каждого маршрута.
   - Проверьте корректность работы при различных вводных данных.

6. Документация API:
   - Создайте документацию для разработанного API с описанием маршрутов, методов, ожидаемых параметров и примеров запросов.

## Инструкции по запуску и тестированию кода

### Запуск программы на Go:

1. REST api

   - Запустить сервер: `go run task_1`;
   - Для тестирования GET-запросов можно открыть в браузере: `http://localhost:8080/users/...`.
   - Тестирование запросов через curl:
     - POST - `curl -X POST -H "Content-Type: application/json" -d "{\"name\": \"Тимур\", \"age\": 20}" http://localhost:8080/users`;
     - PUT - `curl -X PUT -H "Content-Type: application/json" -d "{\"name\": \"Бахром\", \"age\": 20}" http://localhost:8080/users/2`;
     - DELETE - `curl -X DELETE http://localhost:8080/users/1`.

2. БД с использованием PostgreSQL

   - Открыть БД в pgAdmin
     - `CREATE DATABASE go_lab8;`
     - Перейти в эту БД: достаточно раскрыть в иерархии
     - `CREATE TABLE users ( id SERIAL PRIMARY KEY, name VARCHAR(100), age INT);`
   - Запустить сервер: `go run task_2.go`
   - Повторить запросы с предыдушего задания.

3. Работа с ошибками и валидация данных

   - Запустить сервер: `go run task_3`

4. Пагинация и фильтрация

   - Запустить сервер: `go run task_4`
   - Запрос, сочетающий пагинацию и фильтрацию сразу: ввести в браузере `http://localhost:8080/users?limit=5&age=20`

5. Тестирование БД
   - Открыть БД в pgAdmin
   - Запустить сервер: `cd task-6`
   - Запустить тесты: `go test`
   - После теста БД следует очистить от тестовых значений
     `DELETE FROM users WHERE name = 'Тест' OR name = 'Тест2'`
6. См. этот Readme файл
